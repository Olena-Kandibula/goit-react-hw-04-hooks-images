(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2cjH6",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__3YIb-"}},11:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__1Qw6B"}},14:function(e,t,a){e.exports={button:"Button_button__2d4NC"}},15:function(e,t,a){e.exports={loader:"Loader_loader__1nrf2"}},21:function(e,t,a){},22:function(e,t,a){},4:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__iueXA",logo:"Searchbar_logo__1Owml",searchForm:"Searchbar_searchForm__NXg8G",searchFormButton:"Searchbar_searchFormButton__2yJSd",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1TT_Y",searchFormInput:"Searchbar_searchFormInput__aDbFG"}},46:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),n=a(6),o=a.n(n),s=(a(21),a(3)),i=(a(22),a(2)),l=a.n(i),u=a(4),m=a.n(u),d=a(16),h=a(0);function b(e){var t=e.onSubmit,a=Object(r.useState)(""),c=Object(s.a)(a,2),n=c[0],o=c[1];return Object(h.jsxs)("header",{className:m.a.searchbar,children:[Object(h.jsx)("div",{className:m.a.logo,children:Object(h.jsx)("a",{href:"https://pixabay.com/",children:Object(h.jsx)("img",{src:"https://pixabay.com/static/img/public/medium_rectangle_a.png",alt:"Pixabay",width:"48"})})}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(n.trim().toLowerCase()),""!==n?(t(n),o("")):alert("Input is empty")},className:m.a.searchForm,children:[Object(h.jsxs)("button",{type:"submit",className:m.a.searchFormButton,children:[Object(h.jsx)(d.a,{size:"20"}),Object(h.jsx)("span",{className:m.a.searchFormButtonLabel,children:"Search"})]}),Object(h.jsx)("input",{className:m.a.searchFormInput,type:"text",autoComplete:"off",value:n,onChange:function(e){var t=e.currentTarget.value;o(t)},pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",autoFocus:!0,placeholder:"Search images and photos"})]})]})}var j=b;b.prototypes={onSubmit:l.a.func};var g=a(12),p=a(13),f=a.n(p);var O={fetchImg:function(e,t){var a="".concat("https://pixabay.com/api/","?key=").concat("22960570-8de4834e5e1a62c8570402763","&q=").concat(e,"&image_type=photo&orientation=horizontal&page=").concat(t,"&per_page=12");return fetch(a).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.worm(e)}))}},y=a(9),_=a.n(y);function x(e){var t=e.closeModal,a=e.children;Object(r.useEffect)((function(){return document.addEventListener("keydown",c,!1),function(){document.removeEventListener("keydown",c,!1)}}));var c=function(e){27===e.keyCode&&t()};return Object(n.createPortal)(Object(h.jsx)("div",{className:_.a.overlay,onClick:function(e){t()},children:Object(h.jsx)("div",{className:_.a.modal,children:a})}),document.getElementById("modal-root"))}x.protoType={closeModal:l.a.func,children:l.a.node};var v=x,I=a(10),S=a.n(I);function w(e){var t=e.images,a=Object(r.useState)(!1),c=Object(s.a)(a,2),n=c[0],o=c[1],i=Object(r.useState)(""),l=Object(s.a)(i,2),u=l[0],m=l[1],d=function(e){o(!0),m(e.target.dataset.url)};return Object(h.jsxs)(h.Fragment,{children:[t.map((function(e){return Object(h.jsx)("li",{className:S.a.imageGalleryItem,children:Object(h.jsx)("img",{onClick:d,className:S.a.imageGalleryItemImage,"data-url":e.largeImageURL,src:e.webformatURL,alt:e.tag})},e.id)})),n&&Object(h.jsx)(v,{closeModal:function(e){o(!1)},children:Object(h.jsx)("img",{src:u,alt:""})})]})}w.protoType={images:l.a.array};var F=w;function N(e){var t=e.errorQuery;return Object(h.jsxs)("p",{children:['Images with the name "',t,'" were not found, try again! ']})}N.protoType={errorSearchQuery:l.a.string};var G=N,B=a(14),k=a.n(B);function L(e){var t=e.addImages,a=e.pages,r=e.currentPage,c=r<a?"Load more...":"That's all",n=!(r<a);return Object(h.jsx)("button",{type:"button",className:k.a.button,onClick:function(){return t()},disabled:n,children:c})}L.protoType={addImages:l.a.func,pages:l.a.string};var T=L,C=a(11),E=a.n(C),M=a(15),Q=a.n(M);a(44);function z(e){var t=e.searchQuery,a=Object(r.useState)([]),c=Object(s.a)(a,2),n=c[0],o=c[1],i=Object(r.useState)(null),l=Object(s.a)(i,2),u=l[0],m=l[1],d=Object(r.useState)("idle"),b=Object(s.a)(d,2),j=b[0],p=b[1],y=Object(r.useState)(1),_=Object(s.a)(y,2),x=_[0],v=_[1];Object(r.useEffect)((function(){v(1),m(null),o([]),""!==t&&(p("pending"),O.fetchImg(t,1).then((function(e){return 0!==e.total?(o(e.hits),m(e.totalHits),p("resolved")):p("rejected")})).catch((function(e){return console.worm(e)})))}),[t]);var I=Math.ceil(u/12);return"idle"===j?Object(h.jsx)("div",{children:"Input search name, please"}):"pending"===j?Object(h.jsx)(f.a,{className:Q.a.loader,type:"BallTriangle",color:"#00BFFF",height:80,width:80,timeout:3e3}):"rejected"===j?Object(h.jsx)(G,{errorQuery:t}):"resolved"===j&&I>1?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("ul",{className:E.a.imageGallery,children:Object(h.jsx)(F,{images:n})}),Object(h.jsx)(T,{pages:I,currentPage:x,addImages:function(){p("pending"),v(x+1),O.fetchImg(t,x).then((function(e){return o([].concat(Object(g.a)(n),Object(g.a)(e.hits))),p("resolved")})).catch((function(e){return console.worm(e)})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))}})]}):"resolved"===j||1===I?Object(h.jsx)("ul",{className:E.a.imageGallery,children:Object(h.jsx)(F,{images:n})}):void 0}z.prototypes={searchQuery:l.a.string};var A=z;var P=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(j,{onSubmit:function(e){c(e)}}),Object(h.jsx)(A,{searchQuery:a})]})};a(45);o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(P,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={overlay:"Modal_overlay__3Uceg",modal:"Modal_modal__2slb0"}}},[[46,1,2]]]);
//# sourceMappingURL=main.27e6ff4d.chunk.js.map