(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2cjH6",imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__3YIb-"}},11:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__1Qw6B"}},16:function(e,t,a){e.exports={button:"Button_button__2d4NC"}},17:function(e,t,a){e.exports={loader:"Loader_loader__1nrf2"}},25:function(e,t,a){},26:function(e,t,a){},4:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__iueXA",logo:"Searchbar_logo__1Owml",searchForm:"Searchbar_searchForm__NXg8G",searchFormButton:"Searchbar_searchFormButton__2yJSd",searchFormButtonLabel:"Searchbar_searchFormButtonLabel__1TT_Y",searchFormInput:"Searchbar_searchFormInput__aDbFG"}},50:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),n=a(6),o=a.n(n),s=(a(25),a(13)),i=a(14),l=a(20),u=a(18),m=(a(26),a(3)),h=a(2),b=a.n(h),d=a(4),j=a.n(d),g=a(19),p=a(0);function f(e){var t=e.onSubmit,a=Object(r.useState)(""),c=Object(m.a)(a,2),n=c[0],o=c[1];return Object(p.jsxs)("header",{className:j.a.searchbar,children:[Object(p.jsx)("div",{className:j.a.logo,children:Object(p.jsx)("a",{href:"https://pixabay.com/",children:Object(p.jsx)("img",{src:"https://pixabay.com/static/img/public/medium_rectangle_a.png",alt:"Pixabay",width:"48"})})}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(n.trim().toLowerCase()),""!==n?(t(n),o("")):alert("Input is empty")},className:j.a.searchForm,children:[Object(p.jsxs)("button",{type:"submit",className:j.a.searchFormButton,children:[Object(p.jsx)(g.a,{size:"20"}),Object(p.jsx)("span",{className:j.a.searchFormButtonLabel,children:"Search"})]}),Object(p.jsx)("input",{className:j.a.searchFormInput,type:"text",autoComplete:"off",value:n,onChange:function(e){var t=e.currentTarget.value;o(t)},pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",autoFocus:!0,placeholder:"Search images and photos"})]})]})}var O=f;f.prototypes={onSubmit:b.a.func};var y=a(12),_=a(15),v=a.n(_);var x={fetchImg:function(e,t){var a="".concat("https://pixabay.com/api/","?key=").concat("22960570-8de4834e5e1a62c8570402763","&q=").concat(e,"&image_type=photo&orientation=horizontal&page=").concat(t,"&per_page=12");return fetch(a).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.worm(e)}))}},I=a(9),S=a.n(I);function F(e){var t=e.closeModal,a=e.children;Object(r.useEffect)((function(){return document.addEventListener("keydown",c,!1),function(){document.removeEventListener("keydown",c,!1)}}));var c=function(e){27===e.keyCode&&t()};return Object(n.createPortal)(Object(p.jsx)("div",{className:S.a.overlay,onClick:function(e){t()},children:Object(p.jsx)("div",{className:S.a.modal,children:a})}),document.getElementById("modal-root"))}F.protoType={closeModal:b.a.func,children:b.a.node};var w=F,N=a(10),G=a.n(N);function k(e){var t=e.images,a=Object(r.useState)(!1),c=Object(m.a)(a,2),n=c[0],o=c[1],s=Object(r.useState)(""),i=Object(m.a)(s,2),l=i[0],u=i[1],h=function(e){o(!0),u(e.target.dataset.url)};return Object(p.jsxs)(p.Fragment,{children:[t.map((function(e){return Object(p.jsx)("li",{className:G.a.imageGalleryItem,children:Object(p.jsx)("img",{onClick:h,className:G.a.imageGalleryItemImage,"data-url":e.largeImageURL,src:e.webformatURL,alt:e.tag})},e.id)})),n&&Object(p.jsx)(w,{closeModal:function(e){o(!1)},children:Object(p.jsx)("img",{src:l,alt:""})})]})}k.protoType={images:b.a.array};var B=k;function L(e){var t=e.errorQuery;return Object(p.jsxs)("p",{children:['Images with the name "',t,'" were not found, try again! ']})}L.protoType={errorSearchQuery:b.a.string};var Q=L,T=a(16),C=a.n(T);function E(e){var t=e.addImages,a=e.pages,r=e.currentPage,c=r<a?"Load more...":"That's all",n=!(r<a);return Object(p.jsx)("button",{type:"button",className:C.a.button,onClick:function(){return t()},disabled:n,children:c})}E.protoType={addImages:b.a.func,pages:b.a.string};var M=E,A=a(11),z=a.n(A),H=a(17),P=a.n(H);a(48);function J(e){var t=e.searchQuery,a=Object(r.useState)([]),c=Object(m.a)(a,2),n=c[0],o=c[1],s=Object(r.useState)(null),i=Object(m.a)(s,2),l=i[0],u=i[1],h=Object(r.useState)("idle"),b=Object(m.a)(h,2),d=b[0],j=b[1],g=Object(r.useState)(1),f=Object(m.a)(g,2),O=f[0],_=f[1];Object(r.useEffect)((function(){_(1),u(null),o([])}),[t]),Object(r.useEffect)((function(){""!==t&&(j("pending"),x.fetchImg(t,O).then((function(e){return 0!==e.total?(o(e.hits),u(e.totalHits),j("resolved")):j("rejected")})))}),[O,t]);var I=Math.ceil(l/12);return"idle"===d?Object(p.jsx)("div",{children:"Input search name, please"}):"pending"===d?Object(p.jsx)(v.a,{className:P.a.loader,type:"BallTriangle",color:"#00BFFF",height:80,width:80,timeout:3e3}):"rejected"===d?Object(p.jsx)(Q,{errorQuery:t}):"resolved"===d&&I>1?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("ul",{className:z.a.imageGallery,children:Object(p.jsx)(B,{images:n})}),Object(p.jsx)(M,{pages:I,currentPage:O,addImages:function(){j("pending"),_(O+1),x.fetchImg(t,O).then((function(e){return o([].concat(Object(y.a)(n),Object(y.a)(e.hits))),j("resolved"),_(O+1)})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))}})]}):"resolved"===d||1===I?Object(p.jsx)("ul",{className:z.a.imageGallery,children:Object(p.jsx)(B,{images:n})}):void 0}J.prototypes={searchQuery:b.a.string};var U=J,Z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,c=new Array(r),n=0;n<r;n++)c[n]=arguments[n];return(e=t.call.apply(t,[this].concat(c))).state={searchQuery:""},e.formSubmitHandler=function(t){e.setState({searchQuery:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(O,{onSubmit:this.formSubmitHandler}),Object(p.jsx)(U,{searchQuery:this.state.searchQuery})]})}}]),a}(r.Component),D=Z;a(49);o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(D,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={overlay:"Modal_overlay__3Uceg",modal:"Modal_modal__2slb0"}}},[[50,1,2]]]);
//# sourceMappingURL=main.0c46b671.chunk.js.map